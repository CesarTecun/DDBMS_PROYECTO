<!DOCTYPE html>
<html lang="es">

<style>
@keyframes slideFadeInFromBottom {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tarjeta-slide {
  animation: slideFadeInFromBottom 0.7s ease-out;
  background: #f0f0f0;
  padding: 20px;
  margin: 10px;
  border-radius: 8px;
}
</style>

<head>
    <meta charset="UTF-8">
    <title>DDBMS Banco</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', sans-serif; }
        .sidebar {
            height: 100vh;
            background-color: #1e1e2f;
            padding-top: 1rem;
            position: fixed;
            width: 240px;
        }
        .sidebar a {
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1rem;
            display: block;
            transition: background 0.3s;
        }
        .sidebar a:hover {
            background-color: #343454;
        }
        .sidebar .active {
            background-color: #007bff;
        }
        .main {
            margin-left: 240px;
            padding: 1.5rem;
        }
        .sidebar .accordion-button:not(.collapsed),
        .sidebar a.active {
            background-color: #007bff !important;
            color: white !important;
        }
    </style>
</head>
<body>

<!-- Sidebar -->
<!-- Sidebar -->
<div class="sidebar">
    <h5 class="text-white text-center mb-4">DDBMS Banco</h5>
    <!-- Submenú Clientes -->
    <div class="accordion accordion-flush" id="accordionClientes">
        <div class="accordion-item bg-transparent border-0">
            <h2 class="accordion-header">
                <button class="accordion-button bg-transparent text-white ps-3 {% if '/clientes' in request.path or '/dashboard' in request.path %}active{% else %}collapsed{% endif %}"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#submenuClientes"
                        aria-expanded="{{ 'true' if '/clientes' in request.path or '/dashboard' in request.path else 'false' }}">
                    <i class="bi bi-people me-2"></i> Clientes
                </button>
            </h2>
            <div id="submenuClientes"
                 class="accordion-collapse collapse {% if '/clientes' in request.path or '/dashboard' in request.path %}show{% endif %}"
                 data-bs-parent="#accordionClientes">
                <div class="accordion-body ps-4">
                    <a href="/dashboard{% if session.get('rol') == 'sucursal' and session.get('sucursal') %}?rol={{ session.get('sucursal') }}{% endif %}"
                       class="d-block text-white mb-2 {% if request.path == '/dashboard' %}fw-bold text-decoration-underline{% endif %}">
                        <i class="bi bi-eye me-2"></i> Ver
                    </a>
                        {% if session.get("rol") != 'credit' %}
                        <a href="/clientes/registrar"
                        class="d-block text-white {% if request.path == '/clientes/registrar' %}fw-bold text-decoration-underline{% endif %}">
                            <i class="bi bi-person-plus me-2"></i> Crear
                        </a>
                        {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% if session.get('rol') in ['admin', 'credit'] %}
        <a href="/tarjetas/gestionar" class="{% if '/tarjetas/gestionar' in request.path %}active{% endif %}">
            <i class="bi bi-credit-card me-2"></i> Tarjetas
        </a>
    {% endif %}

    {% if session.get("rol") not in ['credit', 'mercadeo'] %}
        <a href="/acciones/crear-cuenta" class="{% if '/crear-cuenta' in request.path %}active{% endif %}">
            <i class="bi bi-bank me-2"></i> Crear Cuenta
        </a>
    {% endif %}



    {% if session.get("rol") not in ['credit', 'mercadeo'] %}
        <a href="/acciones/transferencia" class="{% if '/transferencia' in request.path %}active{% endif %}">
            <i class="bi bi-arrow-left-right me-2"></i> Transferencia
        </a>
    {% endif %}


    <hr class="text-white">
    <a href="/logout">
        <i class="bi bi-box-arrow-right me-2"></i> Cerrar sesión
    </a>
</div>

<!-- Contenido principal -->
<div class="main">
    <!-- Encabezado superior -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="mb-0">Sistema Bancario Distribuido</h4>
        {% if session.get("autenticado") %}
            <span class="text-muted">Usuario: <strong>{{ session.get('usuario', '—') }}</strong></span>
        {% endif %}
    </div>

    {% block content %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>