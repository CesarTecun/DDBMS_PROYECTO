{# templates/dashboard.html #}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel DDBMS</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="mb-4">Panel de Usuario - Sistema DDBMS Bancario</h1>

    <form method="get" action="/dashboard">
        <label for="rol" class="form-label">Selecciona tipo de usuario:</label>
        <select name="rol" id="rol" class="form-select mb-3" onchange="this.form.submit()">
            <option value="">-- Selecciona un rol --</option>
            <option value="sucursal1">Sucursal 1</option>
            <option value="sucursal2">Sucursal 2</option>
            <option value="sucursal3">Sucursal 3</option>
            <option value="credit">Tarjetas de Cr√©dito</option>
            <option value="mercadeo">Mercadeo</option>
            <option value="admin">Administrador</option>
        </select>
    </form>
    <a href="/acciones/nueva" class="btn btn-outline-primary mb-3">+ Nuevo Registro</a>


    {% if rol and datos %}
        <h3 class="mt-4">Datos de: {{ rol|capitalize }}</h3>
        <table class="table table-bordered table-striped mt-3">
            <thead class="table-dark">
                <tr>
                    {% for key in datos[0].keys() %}
                        <th>{{ key }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for fila in datos %}
                    <tr>
                    {% for key, valor in fila.items() %}
                        <td>
                            {% if key == "numero_cuenta" and valor %}
                                <a href="/cuenta/{{ rol }}/{{ valor }}">{{ valor }}</a>
                            {% else %}
                                {{ valor }}
                            {% endif %}
                        </td>
                    {% endfor %}

                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% elif rol %}
        <p class="text-muted">No hay datos disponibles.</p>
    {% endif %}
</div>
</body>
</html>
